<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>exam - custom scroll</title>
<style>
/* temporary css */
*{margin:0;padding:0}
body{font-size:14px;font-family:"나눔고딕",NanumGothic,"굴림",Gulim,Sans-serif;line-height:1.5}
h1,h2,h3,h4,h5,h6{font-size:14px}
ul,li{list-style:none}
button{font-size:14px;font-family:"나눔고딕",NanumGothic,"굴림",Gulim,Sans-serif;line-height:1.5;cursor:pointer}
button::-moz-focus-inner{padding:0;border:0}
.blind{visibility:hidden;overflow:hidden;position:absolute;top:0;left:0;width:1px;height:1px;font-size:0;line-height:0}
.sample{width:600px;margin:0 auto;padding:10px 0}
.sample h1{margin-bottom:5px}
.sample_info{margin-top:10px}
.scroll_wrap{overflow:auto;position:relative;width:600px;height:180px;padding:10px 0 50px;background:#f1f1f1}
.history{width:950px;padding:0 10px}
.history table th{font-size:13px;text-align:left}
.history table td{width:220px;padding:5px 15px 5px 0;font-size:12px;vertical-align:top}
.history table td dl{overflow:hidden}
.history table td dt{float:left;margin-right:10px}
.history table td dd{overflow:hidden}
.scroll_bar_wrap{position:relative;width:600px;height:10px;margin:10px auto 0}
.scroll_bar_wrap .bar_area{position:absolute;top:0;left:0;width:600px;height:12px;border-radius:6px;background:#ddd}
.scroll_bar_wrap .bar_area .bar{position:absolute;top:2px;left:2px;width:350px;height:8px;border-radius:4px;background:#fff;box-shadow:1px 1px 1px 0 #ccc}
/* //temporary css */
</style>
</head>
<body>
<!-- wrapper [s] -->
<div id="wrap">
    <!-- header [s] -->
    <div id="header" role="banner">@</div>
    <!-- header [e] -->
    <hr />
    <!-- container [s] -->
    <div id="container">
        <div class="sample">
            <h1>Hivelab History</h1>
            <div class="scroll_wrap">
                <!-- 스크롤 컨텐츠 영역 [s] -->
                <div class="scroll_view_wrap">
                    <div class="history">
                        <table>
                            <caption class="blind">하이브랩 연혁 요약</caption>
                            <thead>
                                <tr>
                                <th scope="col">2012년</th>
                                <th scope="col">2013년</th>
                                <th scope="col">2014년</th>
                                <th scope="col">2015년</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                <td>
                                    <dl>
                                    <dt>05월</dt>
                                    <dd>(주)하이브랩 설립</dd>
                                    <dt>06월</dt>
                                    <dd>NHN Business Platform 웹 표준화 개발 계약 체결</dd>
                                    <dt>10월</dt>
                                    <dd>SBS 웹 접근성 개선 업무 계약 체결</dd>
                                    <dt>11월</dt>
                                    <dd>NHN Business Platform UI 디자인 계약 체결</dd>
                                    </dl>                                    
                                </td>
                                <td>
                                    <dl>
                                    <dt>02월</dt>
                                    <dd>판교테크노밸리 사무실 이전</dd>
                                    <dt>02월</dt>
                                    <dd>기업부설연구소 설립 (웹접근성 개발)</dd>
                                    <dt>04월</dt>
                                    <dd>벤처기업 인증</dd>
                                    </dl>
                                </td>
                                <td>
                                    <dl>
                                    <dt>01월</dt>
                                    <dd>㈜신세계,이마트 웹 표준화 개발 연간 운영 계약 체결</dd>
                                    <dt>01월</dt>
                                    <dd>카카오 커머스 서비스 디자인, 웹표준화 개발 운영 계약 체결</dd>
                                    <dt>02월</dt>
                                    <dd>NHN Entertainment 디자인,웹표준화 개발 운영 계약 체결</dd>
                                    <dt>03월</dt>
                                    <dd>이베이코리아 웹 표준화 개발 연간 운영 계약 체결</dd>
                                    <dt>03월</dt>
                                    <dd>CJ오쇼핑 웹 표준화 개발 연간 운영 계약 체결</dd>
                                    <dt>04월</dt>
                                    <dd>SK 텔레콤 ‘Myshop’ 반응형 웹 리뉴얼 계약 체결</dd>
                                    <dt>04월</dt>
                                    <dd>㈜하이브랩 에듀웍스 설립 / ‘모노라움’ ( <a href="#">www.monoraum.com</a> ) 학원</dd>
                                    <dt>05월</dt>
                                    <dd>잡코리아 신규 프로젝트 계약 체결</dd>
                                    <dt>10월</dt>
                                    <dd>판교테크노벨리 유스페이스1 A동 406호 사무실 이전</dd>
                                    </dl>
                                </td>
                                <td>
                                    <dl>
                                    <dt>01월</dt>
                                    <dd>㈜넷마블 게임즈 디자인 운영 계약 체결</dd>
                                    <dt>01월</dt>
                                    <dd>King.com 온라인 마케팅 수행 계약 체결 및 연간 유지운영 계약 체결</dd>
                                    <dt>04월</dt>
                                    <dd>벤처기업 재인증</dd>
                                    <dt>10월</dt>
                                    <dd>인덕대학교 미디어아트앤디자인학과 산학협동 협정서(MOU) 체결</dd>
                                    <dt>10월</dt>
                                    <dd>삼성전자 Enhancement Project 수주</dd>
                                    <dt>12월</dt>
                                    <dd>2016 제일기획 협력회사 선정</dd>
                                    </dl>
                                </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <!-- 스크롤 컨텐츠 영역 [e] -->

            </div>
            <!-- 스크롤 바 커스텀 [s] -->
            <div class="scroll_bar_wrap">
                <div class="bar_area">
                    <div class="bar"></div>
                </div>
            </div>
            <!-- 스크롤 바 커스텀 [e] -->
        </div>
    </div>
    <!-- container [e] -->
    <hr />
    <!-- footer [s] -->
    <div id="footer" role="contentinfo">@</div>
    <!-- footer [e] -->
<!-- [ Javascript Area ] -->
<!-- Libs -->
<script src="../js/libs/jquery-1.12.4.min.js"></script>
<script src="js/jquery.mousewheel.min.js"></script>
<!-- Apps -->
<script src="../js/apps/common.js"></script>
<script>
(function (win, $, doc) {
    'use strict';
    win.stProject = win.stProject || {};
    win.stProject.common = win.stProject.common || {};

    var UTIL = win.stProject.common.util;

    win.stProject.customScroll = function (args) {
        var defParams = {
            wrap : '.sample',
            scrollWrap : '.scroll_wrap',
            scrollViewWrap : '.scroll_view_wrap',
            scrollCont : '.history',
            scrollBarWrap : '.scroll_bar_wrap',
            scrollBarArea : '.bar_area',
            scrollBar : '.bar',
            overWrap : '#container',
            keySpaceX : 20,
            keySpaceY : 20,
            barDown : false
        };
        this.opts = $.extend({}, defParams, (args || {}));
        if (!((this.obj = $(this.opts.wrap))).length) return;
        this.init();
    };
    win.stProject.customScroll.prototype = {
        init : function () {
            this.setElements();
            this.initLayout();
            this.initOpts();
            this.setPos();
            this.bindEvents();
        },
        setElements : function () {
            this.scrollWrap = this.obj.find(this.opts.scrollWrap);
            this.scrollViewWrap = this.scrollWrap.find(this.opts.scrollViewWrap);
            this.scrollCont = this.scrollViewWrap.find(this.opts.scrollCont);
            this.scrollBarWrap = this.obj.find(this.opts.scrollBarWrap);
            this.scrollBarArea = this.scrollBarWrap.find(this.opts.scrollBarArea);
            this.scrollBar = this.scrollBarArea.find(this.opts.scrollBar);
            this.overWrap = $(this.opts.overWrap);
        },
        initLayout : function (){
            if (!UTIL.isDevice) {
                this.obj.attr('tabIndex', 0);
                this.scrollWrap.css('overflow', 'hidden');
            } else {
                this.scrollBarWrap.hide();
            }
            this.scrollViewWrap.css('width', this.scrollCont.outerWidth(true));
        },
        initOpts : function () {
            this.currentX = this.currentY = 0;
            this.moveX = this.moveY = 0;
            this.scrollWrap.scrollLeft(0);
            this.scrollWrap.scrollTop(0);
        },
        setPos : function () {
            this.scrollContRangeWidth = this.scrollViewWrap.outerWidth(true) - this.scrollWrap.outerWidth(true);
            this.scrollContRangeHeight = this.scrollViewWrap.outerHeight(true) - this.scrollWrap.outerHeight(true);
            this.scrollBarRangeWidth = this.scrollBarArea.outerWidth(true) - this.scrollBar.outerWidth(true) - 4;
            this.contMoveRange = this.scrollContRangeWidth / this.scrollBarRangeWidth;
        },
        bindEvents : function () {
            this.obj.on('keydown', $.proxy(this.onKeyDownFunc, this));
            this.scrollBarArea.on('mousedown', $.proxy(this.barAreaMouseDownFunc, this));
            this.scrollBar.on('mousedown', $.proxy(this.barMouseDownFunc, this));
            this.scrollWrap.on('mousewheel', $.proxy(this.mouseWheelFunc, this));
            this.overWrap.on('mousemove', $.proxy(this.containerMouseMoveFunc, this));
            $(doc).on('mouseup', $.proxy(this.docMouseUpFunc, this));
        },
        onKeyDownFunc : function (e) {
            if (e.which === 39) {
                this.moveX = this.currentX + this.opts.keySpaceX;
            } else if (e.which === 37) {
                this.moveX = this.currentX - this.opts.keySpaceX;
            } else if (e.which === 40) {
                this.moveY = this.currentY + this.opts.keySpaceY;
            } else if (e.which === 38) {
                this.moveY = this.currentY - this.opts.keySpaceY;
            }

            if ((e.which === 39) || (e.which === 37)) {
                this.contMoveX = this.moveX * this.contMoveRange;
                this.contMoveXFunc();
                this.barMoveXFunc();
            } else if ((e.which === 38) || (e.which === 40)) {
                this.contMoveY = this.moveY;
                this.contMoveYFunc();
                this.barMoveYFunc();
            }
            this.endMoveFunc();
        },
        barAreaMouseDownFunc : function (e) {
            var scrollBar = this.scrollBar,
                scrollBarOffsetLeft = scrollBar.offset().left;
            this.downWhich = e.pageX;
            this.downPosition = (this.downWhich < scrollBarOffsetLeft) ? 'left' : 'right';
            win.clearInterval(this.downIntervalTime);
            this.downIntervalTime = win.setInterval($.proxy(this.downIntervalFunc, this), 10);
        },
        downIntervalFunc : function () {
            var scrollBar = this.scrollBar,
                scrollBarOffsetLeft = scrollBar.offset().left,
                scrollBarWidth = scrollBarOffsetLeft + scrollBar.outerWidth();
            if ((scrollBarOffsetLeft <= this.downWhich) && (scrollBarWidth >= this.downWhich)) {
                return win.clearInterval(this.downIntervalTime);
            }
            if (this.downPosition === 'right') {
                this.moveX = this.currentX + this.opts.keySpaceX;
            } else if (this.downPosition === 'left') {
                this.moveX = this.currentX - this.opts.keySpaceX;
            }
            this.contMoveX = this.moveX * this.contMoveRange;
            this.contMoveXFunc();
            this.barMoveXFunc();
            this.endMoveFunc();
        },
        barMouseDownFunc : function (e) {
            e.preventDefault();
            e.stopPropagation();
            this.opts.barDown = true;
            this.downWhich = e.pageX;
        },
        docMouseUpFunc : function (e) {
            e.stopPropagation();
            win.clearInterval(this.downIntervalTime);
            if (!this.opts.barDown) return;
            this.opts.barDown = false;
            this.endMoveFunc();
        },
        containerMouseMoveFunc : function (e) {
            e.stopPropagation();
            if (!this.opts.barDown) return;
            this.moveX = (e.pageX - this.downWhich) + this.currentX;
            this.contMoveX = this.moveX * this.contMoveRange;
            this.contMoveXFunc();
            this.barMoveXFunc();
        },
        contMoveXFunc : function () {
            if (this.contMoveX < 0) {
                this.contMoveX = 0;
            } else if (this.contMoveX >= this.scrollContRangeWidth) {
                this.contMoveX = this.scrollContRangeWidth;
            }
            this.scrollWrap.scrollLeft(this.contMoveX);
        },
        barMoveXFunc : function () {
            if (this.moveX < 0) {
                this.moveX = 0;
            } else if (this.moveX >= this.scrollBarRangeWidth) {
                this.moveX = this.scrollBarRangeWidth;
            }
            this.scrollBar.css('margin-left', this.moveX);
        },
        contMoveYFunc : function () {
            if (this.contMoveY < 0) {
                this.contMoveY = 0;
            } else if (this.contMoveY >= this.scrollContRangeHeight) {
                this.contMoveY = this.scrollContRangeHeight;
            }
            this.scrollWrap.scrollTop(this.contMoveY);
        },
        barMoveYFunc : function () {
            if (this.moveY < 0) {
                this.moveY = 0;
            } else if (this.moveY >= this.scrollContRangeHeight) {
                this.moveY = this.scrollContRangeHeight;
            }
        },
        endMoveFunc : function () {
            this.currentX = this.moveX;
            this.currentY = this.moveY;
        },
        mouseWheelFunc : function (e) {
            e.preventDefault();
            if (e.deltaY < 0) {
                this.moveY = this.currentY + this.opts.keySpaceY;
            } else {
                this.moveY = this.currentY - this.opts.keySpaceY;
            }
            this.contMoveY = this.moveY;
            this.contMoveYFunc();
            this.barMoveYFunc();
            this.endMoveFunc();
        }
    };
    $(function () {
        win.stCustomScroll = new win.stProject.customScroll();
    });
})(window, window.jQuery, window.document);
</script>
</div>
</body>
</html>
